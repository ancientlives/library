### React - Fundamentals - Forms

A quick introduction to using forms in the React JavaScript library. Further details are available at the [React](http://facebook.github.io/react/) website.

#### Contents
* Intro
* Uncontrolled components
* Controlled components

##### Intro
As with other aspects of one-page applications, React helps to manage `state` for forms. There are two types of form components in React, which include *controlled* and *uncontrolled*.

##### Uncontrolled components
In a strange way, *uncontrolled* can be considered a type of anti-pattern for how many other components are constructed in React.

So, if we consider a HTML form we can certainly see that it works differently to React components. For example, HTML `input` may be given a value, which can then be mutated by the `input`. This is where the name originates, effectively because the form component's value is *Uncontrolled* by a React component.

An *Uncontrolled* component is also of little use unless we can access the value. However, in order to access this value we need to add a `ref` to the `input`, and then access the `DOMNode` value.

A `ref` is a special *non-DOM* attribute, which we can use to identify a component within its local context `this`. Also, all `refs` are added to `this.refs` for easier access.

For example,

```
//basic input and output to alert...
  var BasicForm = React.createClass({
    formSubmit: function(e) {
      e.preventDefault();
      var basicText = React.findDOMNode(this.refs.basicInput).value;
      alert(basicText);
    },
    render: function() {
      return (
        <form onSubmit={this.formSubmit}>
          <input
          ref="basicInput"
          type="text"
          defaultValue="basic input..." />
          <br />
          <button
            type="submit">
            Submit
          </button>
        </form>
      );
    }
  });

  React.render(<BasicForm />, document.getElementById('example'));
```

Uncontrolled components are particularly useful for basic forms. In particular, those forms that do not require special validation or input controls.

##### Controlled components
As you might imagine, *controlled* components follow the same pattern as standard React components. In effect, the state of the form component is controlled by React, with its value stored in `state`.

So, we can now store the value of a form's `input` in the `state` of the parent component. We can modify the above example, and use the following data flow

* `getInitialState` sets the `defaultValue`
* `input` value is set during `render`
* `onChange` of the `input` value causes the defined change handler to be called
* this change handler now updates the app's `state`
* `input` value is then updates duing the app's render

For example,

```
    //basic input and output to alert...
    var BasicForm = React.createClass({
      getInitialState: function() {
        return {
          formText: "ask me a question..."
        };
      },
      formChange: function(e) {
        this.setState({
            formText: e.target.value
        });
      },
      formSubmit: function(e) {
        e.preventDefault();
        alert(this.state.formText);
      },
      render: function() {
        return (
          <form onSubmit={this.formSubmit}>
            <input
              type="text"
              value={this.state.formText}
              onChange={this.formChange} />
            <br />
            <button type="submit">
              Submit
            </button>
          </form>
        );
      }
    });

    React.render(<BasicForm />, document.getElementById('example'));
```

Whilst this is more code than the `uncontrolled` version above, its inherent benefit is that it allows us to control the data flow and alter the `state` as the data is being entered by the user etc.

Therefore, we might want to change the case of the text from lower to upper in the `handleChange` function. We could also use this same technique to check form input, restrict characters entered, dynamically show how many characters are left in an input, add the text to a render div as its being typed, and so on...

For example,

```
    //basic input and output to alert...
    var BasicForm = React.createClass({
      getInitialState: function() {
        return {
          formText: "ask me a question..."
        };
      },
      formChange: function(e) {
        this.setState({
          //add option to update or check the value from input before setting state - eg: modify text to upper case...
            //formText: e.target.value
            //converts user input to upper case on the fly...
            formText: e.target.value.toUpperCase()
        });
      },
      formSubmit: function(e) {
        e.preventDefault();
        alert(this.state.formText);
      },
      render: function() {
        return (
          <form onSubmit={this.formSubmit}>
            <input
              type="text"
              value={this.state.formText}
              onChange={this.formChange} />
            <br />
            <button type="submit">
              Submit
            </button>
          </form>
        );
      }
    });

    React.render(<BasicForm />, document.getElementById('example'));
```
